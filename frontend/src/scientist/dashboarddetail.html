<template>
  <require from="./dashboard.css"></require>
  <require from="../components/webdavfilepanel"></require>
  <require from="../components/fileeditor"></require>
  <h3>Project/Dataset Detail</h3>
  <b>Select<span show.bind="! showProposals">ed</span> project visit/proposal:</b>
  <table class="w3-table-all">
    <tr show.bind="showProposals">
      <th>id</th>
      <th>name</th>
      <th>summary</th>
    </tr>
    <tr show.bind="showProposals" class="au-animate" repeat.for="project of projects">
      <td>${project.id}</td>
      <td>
        <iproject></iproject>
        <a class="w3-hover-green" route-href="route: projectdetail; params.bind: {projectid:project.id}"
           click.trigger="selectProposal()">${project.projectName}</a>
      </td>
      <td>${project.summary} (${project.datasets})</td>
    </tr>
    <tr show.bind="! showProposals" title="click to show all projects" class="w3-hover-green">
      <td>${selectedProject.id}</td>
      <td>
        <iproject></iproject>
        <a class="w3-hover-green" click.trigger="deselectProposal()">
          ${selectedProject.projectName}</a>
      </td>
      <td>${selectedProject.summary}</td>
    </tr>
  </table>
  <b>Select<span show.bind="! showDatasets">ed</span> dataset to narrow files:</b>
  <table class="w3-table-all">
    <thead show.bind="showDatasets">
    <tr>
      <th>date</th>
      <th>Summary</th>
      <th>i</th>
    </tr>
    </thead>
    <tbody>
    <tr show.bind="showDatasets" class="w3-hover-green" repeat.for="item of datasets">
      <td>${item.date}</td>
      <td>
        <idata></idata>
        <a class="w3-hover-green"
           route-href="route: datasetdetail; params.bind: {datasetid:item.id}">${item.summary}</a></td>
      <td>${item.info}</td>
      <td>${item.projectId}</td>
      <td>
        <icopy href.bind="item.webdavurl"></icopy>
      </td>
    </tr>
    <tr if.bind="! showDatasets" class="w3-hover-green">
      <td click.trigger="deselectDataset()">${selectedDataset.date}</td>
      <td click.trigger="deselectDataset()">
        <idata></idata>
        ${selectedDataset.summary}
      </td>
      <td click.trigger="deselectDataset()">${selectedDataset.info}</td>
      <td click.trigger="deselectDataset()">${selectedDataset.projectId}</td>
      <td>
        <icopy href.bind="selectedDataset.webdavurl"></icopy>
      </td>
    </tr>
    </tbody>
  </table>
  <div show.bind="! showDatasets" class="w3-half">
    <b>Files:</b>
    <webdavfilepanel></webdavfilepanel>
  </div>
  <div show.bind="! showDatasets" class="w3-half">
    <div class="w3-margin-left">
      <fileeditor></fileeditor>
    </div>
  </div>

  <p>&nbsp;</p>
</template>
