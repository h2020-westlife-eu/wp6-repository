<template>
  <require
    from="./visitingscientist.css"></require>
      <h3>Repository Dashboard</h3>
<p>You are logged as visiting scientist.
  You can view your visits or proposals.
  Clicking on visit or proposal you can narrow datasets related to the visit.
</p>
<div class="w3-card au-animate">
    <h4>Proposals for Visits (Instruct):<button show.bind="!showProposals" class="w3-button au-animate" click.trigger="showAllProposals()">Show all</button></h4>
    <div show.bind="showProposals" class="au-animate">
    <table class="w3-table">
      <tr>
        <th>pid</th><th>title</th>
      </tr>
      <tr repeat.for="proposal of proposals"  class="w3-hover-green" click.trigger="selectProposal(proposal)">
        <td>${proposal.projectId}</td><td>${proposal.summary}(${proposal.datasets})</td>
      </tr>
      <tr show.bind="showallbutton" class="w3-hover-green" click.trigger="switchMoreLessProposals()"><td colspan="2"><span show.bind="showmorebutton">.. see more proposals (${proposalslength})</span><span show.bind="!showmorebutton"> .. see less proposals</span></td> </tr>
    </table>
    <p>Instruct -
      <a href="https://www.structuralbiology.eu/dashboard?t=instruct" class="w3-button">Dashboard</a>
    </p>
    <p>Instruct -
      <a href="https://www.structuralbiology.eu/submit-proposal/step1/new" class="w3-button">New Proposal</a> for a visit.
    </p>
      </div>
    <div show.bind="! showProposals" class="au-animate">
      <p class="w3-green">${selectedProposal.projectId} ${selectedProposal.summary}</p>
    </div>
  </div>

  <p>
  You can view datasets.
  Every dataset consists of files.
  Clicking on a dataset will switch to file view of the dataset.</p>
  <div class="w3-card">
  <h4>Datasets:</h4>
  <div show.bind="showDatasets" class="au-animate">
  <table class="w3-table">
    <thead>
    <tr>
      <th>date</th><th>Summary</th><th>i</th>
    </tr>
    </thead>
    <tbody>
    <tr class="w3-hover-green" repeat.for="item of items" click.trigger="selectDataset(item)">
      <td>${item.date}</td>
      <td>${item.summary}</td>
      <td>${item.info}</td>
      <td>${item.projectId}</td>
    </tr>
    <tr  class="w3-hover-green"><td colspan="3"><a href="#datasets">... see all datasets ...</a></td> </tr>
    </tbody>
  </table>
  </div>
    <div show.bind="! showDatasets" class="au-animate">
      <p>${selectedDataset.date} ${selectedDataset.summary} ${selectedDataset.info} ${selectedDataset.projectId}</p>
    </div>
</div>
  <p>&nbsp;</p>
</template>
