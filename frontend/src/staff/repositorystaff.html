<template>
  <h3>Repository Staff UI</h3>
  <p> This page shows File upload dialog, used by Support Staff at local workstation to upload data acquisition into the visiting scientist account.</p>
  <label>Project input
    <input class="w3-input">
  </label>
  <div show.bind="selectinguser">
  <p><b>1.</b>Select a user, who's data will be uploaded:</p>
  <table class="w3-table-all" draggable="true">
    <tr class="w3-hover-green" repeat.for="visitor of visitors" click.trigger="selectvisitor(visitor)">
      <td>${visitor.Id}</td><td>${visitor.FirstName} ${visitor.LastName}</td>
    </tr>
  </table>
  </div>
  <div show.bind="!selectinguser">
    <p><b>1.</b>Selected user: ${selectedvisitor} <button class="w3-button w3-padding-tiny" click.trigger="deselectvisitor()">change</button></p>
    <p><b>2.</b>Select or drop files or directories to upload to the user account.</p>
<table>
  <tr>
    <td  class="w3-cell-top">
      <div>
        <h4>Local files</h4>
        <form>
          <table class="w3-table-all w3-padding-tiny" drop.trigger="dropped($event)" ondragover="event.preventDefault();">
            <thead>
            <tr>
              <th>drag & drop files/directories here or browse</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td><input class="w3-button" type="file" multiple="multiple" name="files[]" webkitdirectory="true"
                         change.delegate="appendDir($event)" value.bind="uploaddir"/>
                <input class="w3-button" type="file" multiple="multiple" title="Select Files to Download"
                       change.delegate="appendFiles($event)" value.bind="uploadfiles"/>
              </td>
              <td>Totally: ${filestoupload.length} files will be uploaded.</td>
            </tr>
            <tr class="w3-hover-green" repeat.for="item of filestoupload" click.trigger="selectItemToUpload(item)">
              <td class="w3-padding-tiny">${item.name}</td>
              <td class="w3-padding-tiny">
                <button class="w3-button  w3-padding-tiny" title="delete" click.delegate="removeItemToUpload(item)">x</button>
              </td>
            </tr>
            </tbody>
          </table>
        </form>
      </div>

    </td>
    <td class="w3-cell-top">
      <div>

        <button disabled.bind="filestoupload.length == 0" class="w3-button w3-green"
                click.delegate="submitUpload()">Upload to &raquo;
        </button>


      </div>

    </td>
    <td  class="w3-cell-top">
      <div>
        <h4>Repository files</h4>
        <table class="w3-table-all">
          <thead>
          <tr>
            <th>filename</th>
            <th>date</th>
            <th colspan="2">action</th>
          </tr>
          </thead>
          <tr class="w3-hover-green" repeat.for="item of items" click.trigger="selectitem(item)">
            <td class="w3-padding-tiny">${item.name}</td>
            <td class="w3-padding-tiny">${item.date}</td>
            <td class="w3-padding-tiny">
              <button class="w3-button w3-padding-tiny" title="delete" click.trigger="deleteitem(item)">x</button>
            </td>

          </tr>
        </table>
      </div>

    </td>
  </tr>
</table>
  </div>

</template>
