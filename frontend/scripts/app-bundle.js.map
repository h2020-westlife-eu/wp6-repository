{"version":3,"sources":["app.js","environment.js","main.js","components/messages.js","components/userinfo.js","components/webdavfilepanel.js","home/home.js","login/login.js","pickerclient/pickerclient.js","repository/app.js","repository/main.js","resources/index.js","scientist/repositorytovf.js","scientist/visitingscientist.js","staff/app.js","staff/main.js","staff/repositorystaff.js"],"names":["App","configureRouter","config","router","title","login","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Webdavresource","webdavurl","Userinfo","httpclient","rejectErrorResponses","withBaseUrl","withDefaults","credentials","headers","showuserinfo","attached","console","log","fetch","response","json","data","userinfo","catch","error","inject","Webdavfilepanel","ea","subscribe","setwebdav","msg","webdavpath","method","text","window","DOMParser","parseFromString","str","files","filesDOM","getElementsByTagName","fileitem","filename","getFirstElementByTagName","filedate","filesize","filetype","item","name","replace","date","size","type","push","Home","Login","Pickerclient","href","href2","vfurl","receiveMessage","e","mode","addEventListener","filepicker","detached","removeEventListener","openfilewindow","popup","open","opendirwindow","map","route","moduleId","nav","Repositorytovf","items","summary","info","filestoupload","uploadfiles","uploaddir","selectingfiles","selectitem","submitfiles","unsubmitfiles","deleteitem","indexremoved","indexOf","splice","selectItemToUpload","removeItemToUpload","i","dropped","event","dataTransfer","stopPropagation","preventDefault","unshift","dragged","appendFiles","target","appendDir","submitUpload","Visitingscientist","proposals","itemsall","projectId","slice","showProposals","showDatasets","proposalsall","proposalslength","length","showallbutton","showmorebutton","switchMoreLessProposals","selectProposal","selectedProposal","filter","filtereditem","id","showAllProposals","selectDataset","selectedDataset","tag","elements","textContent","deselectDataset","selectFile","file","Repositorystaff","visitors","selectinguser","selectedvisitor","client","serviceurl","get","JSON","parse","selectvisitor","visitor","deselectvisitor"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n\n  configureRouter(config, router) {\n    config.title = 'West-Life Repository Router';\n  }\n\n  login() {\n    //window.location=\"login.html?next\"+window.location.pathname;\n  }\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class Webdavresource {\n  constructor(webdavurl){\n    this.webdavurl = webdavurl;\n  }\n}\n","import {HttpClient} from 'aurelia-fetch-client';\n\nexport class Userinfo {\n  static inject = [HttpClient];\n\n  constructor(httpclient) {\n    this.httpclient = httpclient;\n    this.httpclient.configure(config => {\n      config\n        .rejectErrorResponses()\n        .withBaseUrl('/restcon/')\n        .withDefaults({\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n    })\n    this.showuserinfo=false;\n  }\n\n  attached(){\n    console.log(\"Userinfo atached()\")\n    this.httpclient.fetch(\"user\")\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n        this.userinfo=data;\n        this.showuserinfo=true;\n      })\n      .catch(error => {\n        //console.log(error);\n        console.log(error);\n//          alert(\"Sorry, error:\"+error.statusCode+\" \"+error.message);\n      });\n  }\n}\n","import {HttpClient} from 'aurelia-fetch-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {Webdavresource} from './messages';\n\nexport class Webdavfilepanel {\n  static inject = [EventAggregator,HttpClient];\n\n  constructor(ea,httpclient) {\n    this.ea =ea;\n    this.httpclient = httpclient;\n    this.httpclient.configure(config => {\n      config\n        .rejectErrorResponses()\n        .withBaseUrl('')\n        .withDefaults({\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n    });\n    //this.webdavbase = ;\n    this.ea.subscribe(Webdavresource,msg =>this.setwebdav(msg.webdavurl))\n    this.webdavpath = '/files/XufWqKau/';\n  }\n\n  setwebdav(webdavurl) {\n    this.webdavpath = webdavurl;\n    this.httpclient.fetch(this.webdavpath, {\n      method: 'PROPFIND',\n      headers: {'Depth': '1'}\n    }).then(response => response.text())\n      .then(str => (new window.DOMParser()).parseFromString(str, \"text/xml\"))\n      .then(data => {\n        console.log(\"selectDataset() files:\")\n        console.log(data);\n        //parse structure https://stackoverflow.com/questions/17604071/parse-xml-using-javascript\n        this.files = [];\n        let filesDOM = data.getElementsByTagName(\"D:response\");\n        for (let fileitem of filesDOM) {\n          let filename = this.getFirstElementByTagName(fileitem, \"D:href\");\n          let filedate = this.getFirstElementByTagName(fileitem, \"lp1:creationdate\");\n          let filesize = this.getFirstElementByTagName(fileitem, \"lp1:getcontentlength\");\n          let filetype = this.getFirstElementByTagName(fileitem, \"D:getcontenttype\");\n          if (filename != this.webdavpath) //do not include current dir\n          {\n            let item = {};\n            item.name = filename.replace(this.webdavpath, '')\n            item.date = filedate;\n            item.size = filetype == 'httpd/unix-directory' ? 'DIR' : filesize;\n            item.type = filetype;\n            console.log(item);\n            this.files.push(item);\n          }\n\n        }\n        console.log(this.files);\n\n      }).catch(error => {\n      console.log(\"selectDataset() error\");\n      console.log(error);\n    });\n  }\n}\n","export class Home {\n\n}\n","import {HttpClient} from 'aurelia-http-client';\n\nexport class Login {\n\n\n}\n","import {bindable} from 'aurelia-framework';\n\nexport class Pickerclient {\n\n  @bindable mode;\n\n  constructor() {\n    this.href=\"https://portal.west-life.eu/virtualfolder/filepickercomponent.html\";\n    this.href2=\"https://portal.west-life.eu/virtualfolder/uploaddirpickercomponent.html\";\n    this.vfurl=\"\";\n    //receives message from popup window, fills target element with the data received\n    this.receiveMessage = e => {\n      console.log(\"received event\");\n      console.log(e);\n      this.vfurl=e.data;\n    }\n    console.log(\"Pickerclient()\");\n    console.log(this.mode)\n  }\n\n  attached() {\n    //registers itself to receive message from popup window\n    window.addEventListener(\"message\", this.receiveMessage);\n    console.log(\"Pickerclient attached()\");\n    console.log(this.mode);\n    this.filepicker = (this.mode === \"file\")\n  }\n\n  detached() {\n    window.removeEventListener(\"message\", this.receiveMessage)\n  }\n\n//opens popup window in defined location, sets the target element id.\n  openfilewindow() {\n    this.popup=window.open(this.href, 'newwindow', 'width=640, height=480');\n  }\n  opendirwindow() {\n    this.popup=window.open(this.href2, 'newwindow', 'width=640, height=480');\n  }\n}\n","export class App {\n\n  configureRouter(config, router) {\n    config.title = 'West-Life Repository Router';\n    config.map([\n      {route: ['', 'home'], name: 'home', moduleId: 'scientist/visitingscientist', nav: true, title: 'Dataset Dashboard'},\n      {route: 'repositorytovf', name: 'repositorytovf', moduleId: 'scientist/repositorytovf', nav: true, title: 'Upload to Virtual Folder'},\n    ]);\n    this.router = router;\n  }\n\n  login() {\n    //window.location=\"login.html?next\"+window.location.pathname;\n  }\n\n}\n","import environment from '../environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {HttpClient} from 'aurelia-http-client';\n\nexport class Repositorytovf {\n\n  constructor() {\n    console.log(\"Repositorytovf()\");\n\n    this.items=[{date:\"06/09/2017\",summary:\"spectrum of strychnine process with v_noesy_pro.mac (NUTS-Pro) or v_noesy.mac (NUTS-2D)\", info:\"1.6 Mb\"},\n      {date:\"07/09/2017\",summary:\" spectrum of sucrose (1.3 Mbytes); process with v_ghsqc_pro.mac (NUTS-Pro) or v_ghsqc.mac (NUTS-2D)\", info:\"1.3 Mb\"},\n      {date:\"08/09/2017\",summary:\"spectrum of strychnine (2.1 Mbytes); process with v_hsqc_pro.mac (NUTS-Pro) or v_hsqc.mac (NUTS-2D).\", info:\"2.1 Mb\"},\n    ]\n    this.filestoupload=[];\n    this.uploadfiles=[];\n    this.uploaddir=\"\";\n    this.selectingfiles=true;\n  }\n\n  attached() {\n\n  }\n\n  selectitem(item) {\n    console.log(\"Selected\",item)\n  }\n\n  submitfiles() {\n    this.selectingfiles=false;\n  }\n\n  unsubmitfiles(){\n    this.selectingfiles=true;\n  }\n  deleteitem(item){\n    let indexremoved = this.items.indexOf(item);\n    if (indexremoved >=0 ) this.items.splice(indexremoved,1);\n  }\n\n  selectItemToUpload(item) {\n    console.log(\"selected item\");\n    console.log(item);\n  }\n\n  removeItemToUpload(item){\n    console.log(\"selected item\");\n    console.log(item);\n    let i = this.filestoupload.indexOf(item);\n    this.filestoupload.splice(i,1);\n  }\n\n  dropped(event){\n    console.log(\"Dropped\")\n    console.log(event.dataTransfer.files);\n    event.stopPropagation();\n    event.preventDefault();\n    this.filestoupload.unshift(...event.dataTransfer.files);\n    return true;\n  }\n\n  dragged(event){\n    return true;//event.preventDefault(); event.dataTransfer.dropEffect = 'copy';\n  }\n\n  appendFiles(event){\n    console.log(\"appendFiles()\");\n    console.log(event.target.files);\n    //this.uploadfiles=event.target.files;\n    this.filestoupload.unshift(...event.target.files);\n    //else this.filestoupload.unshift(event.target.files);\n  }\n\n  appendDir(event) {\n    console.log(\"appendDir\")\n    console.log(event.target.files);\n    this.filestoupload.unshift(...event.target.files)\n  }\n\n  submitUpload(){\n    //TODO fake implementation\n    this.items.unshift(...this.filestoupload);\n    this.filestoupload=[];\n  }\n\n}\n","import {HttpClient} from 'aurelia-fetch-client';\n\n\nexport class Visitingscientist {\n  static inject = [HttpClient];\n  constructor(httpclient) {\n\n    this.httpclient=httpclient;\n    this.httpclient.configure(config => {\n      config\n        .rejectErrorResponses()\n        .withBaseUrl('/restcon/')\n        .withDefaults({\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n    });\n\n\n    this.proposals = [];\n    //demo data until backend is implemented\n    this.itemsall=[{projectId:\"1\",date:\"06/09/2017\",summary:\"spectrum of strychnine process with v_noesy_pro.mac (NUTS-Pro) or v_noesy.mac (NUTS-2D)\", info:\"1.6 Mb\"},\n      {projectId:\"1\",date:\"07/09/2017\",summary:\" spectrum of sucrose (1.3 Mbytes); process with v_ghsqc_pro.mac (NUTS-Pro) or v_ghsqc.mac (NUTS-2D)\", info:\"1.3 Mb\"},\n      {projectId:\"2\",date:\"08/09/2017\",summary:\"spectrum of strychnine (2.1 Mbytes); process with v_hsqc_pro.mac (NUTS-Pro) or v_hsqc.mac (NUTS-2D).\", info:\"2.1 Mb\"},\n    ]\n    this.files=[{name:\"sucrose.t1\",size:133511,date:\"18/06/2001\"},\n      {name:\"hetcor.2d\",size:525832,date:\"18/06/2001\"},\n      {name:\"menth.c13\",size:132108,date:\"18/06/2001\"},\n      {name:\"noesy.fid\",size:1640436,date:\"18/06/2001\"},\n      {name:\"hsqc.fid\",size:2098448,date:\"18/06/2001\"},\n      {name:\"hmbc.fid\",size:2098448,date:\"18/06/2001\"}]\n    this.items = this.itemsall.slice()\n    this.showProposals=true;\n    this.showDatasets=true;\n  }\n\n  attached() {\n    this.httpclient.fetch(\"project\")\n      .then(response => response.json())\n      .then(data => {\n          this.proposalsall = data;\n          this.proposals = this.proposalsall.slice(0,3);\n          this.proposalslength= this.proposalsall.length;\n          this.showallbutton = this.proposalsall.length > 3;\n          this.showmorebutton = true;\n\n      })\n      .catch(error => {\n          console.log(error);\n      });\n    //not yet implemented on backend\n    this.httpclient.fetch(\"data\")\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n          this.itemsall = data\n        })\n      .catch(error => {\n        //console.log(error);\n        console.log(error);\n      });\n\n  }\n\n  switchMoreLessProposals() {\n    if (this.showmorebutton) {\n      this.proposals = this.proposalsall;\n      this.showmorebutton = false;\n    } else {\n      this.proposals = this.proposalsall.slice(0,3);\n      this.showmorebutton = true;\n    }\n  }\n  selectProposal(item) {\n\n    this.selectedProposal=item;\n    this.showProposals=false;\n    this.items = this.itemsall.filter(filtereditem => filtereditem.projectId == item.id)\n  }\n  showAllProposals(){\n    this.showProposals=true;\n    this.showDatasets=true;\n    this.items = this.itemsall.slice()\n  }\n\n  selectDataset(item) {\n    this.showDatasets=false;\n    this.selectedDataset=item;\n    //TODO replace URL by the one obtained from API\n\n  }\n\n  getFirstElementByTagName(fileitem,tag) {\n    //console.log(tag);\n    let elements =fileitem.getElementsByTagName(tag);\n    //console.log(elements);\n    return elements.length>0?elements[0].textContent:'';\n  }\n\n  deselectDataset() {\n    this.showDatasets=true;\n  }\n\n  selectFile(file){\n    console.log(\"SelectFile()\")\n    console.log(file);\n    //not yet implemented\n  }\n}\n","export class App {\n\n  configureRouter(config, router) {\n    config.title = 'West-Life Repository Router';\n    config.map([\n      {route: ['', 'home'], name: 'home', moduleId: 'staff/repositorystaff', nav: true, title: 'Dataset Dashboard'}\n    ]);\n    this.router = router;\n\n  }\n\n}\n","import environment from '../environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {HttpClient} from 'aurelia-http-client';\n\nexport class Repositorystaff {\n  static inject = [HttpClient];\n  constructor(httpclient) {\n    console.log(\"Repositorystaff()\");\n    this.visitors = [];//\"Tomas Kulhanek\",\"Andrea Giacchieti\",\"Antonio Rosatto\"];\n    this.items=[];\n    this.filestoupload=[];\n    this.uploadfiles=[];\n    this.uploaddir=\"\";\n    this.selectinguser=true;\n    this.selectedvisitor=\"\";\n    this.client =httpclient;\n    this.serviceurl=\"/admin/restcon/users\"\n  }\n\n  attached() {\n    this.client.get(this.serviceurl)\n      .then(data => {\n        //console.log(data);\n        if (data.response) {\n          this.visitors = JSON.parse(data.response);\n        }\n      })\n      .catch(error => {\n        //console.log(error);\n        console.log(error);\n        //alert(\"Sorry, error:\"+error.statusCode+\" \"+error.message);\n      });\n  }\n\n  selectitem(item) {\n    console.log(\"Selected\",item)\n  }\n\n  selectvisitor(visitor) {\n    this.selectinguser=false;\n    this.selectedvisitor = visitor;\n  }\n  deselectvisitor(){\n    this.selectinguser=true;\n  }\n  deleteitem(item){\n    let indexremoved = this.items.indexOf(item);\n    if (indexremoved >=0 ) this.items.splice(indexremoved,1);\n  }\n  \n    selectItemToUpload(item) {\n    console.log(\"selected item\");\n    console.log(item);\n  }\n\n  removeItemToUpload(item){\n    console.log(\"selected item\");\n    console.log(item);\n  let i = this.filestoupload.indexOf(item);\n    this.filestoupload.splice(i,1);\n  }\n\n  dropped(event){\n    console.log(\"Dropped\")\n    console.log(event.dataTransfer.files);\n    event.stopPropagation();\n    event.preventDefault();\n    this.filestoupload.unshift(...event.dataTransfer.files);\n    return true;\n  }\n\n  dragged(event){\n    return true;//event.preventDefault(); event.dataTransfer.dropEffect = 'copy';\n  }\n\n  appendFiles(event){\n    console.log(\"appendFiles()\");\n    console.log(event.target.files);\n    //this.uploadfiles=event.target.files;\n    this.filestoupload.unshift(...event.target.files);\n    //else this.filestoupload.unshift(event.target.files);\n  }\n\n  appendDir(event) {\n    console.log(\"appendDir\")\n    console.log(event.target.files);\n    this.filestoupload.unshift(...event.target.files)\n  }\n\n  submitUpload(){\n    //TODO fake implementation\n    this.items.unshift(...this.filestoupload);\n    this.filestoupload=[];\n  }\n\n}\n"],"sourceRoot":"../src"}