{"version":3,"sources":["app.js","environment.js","main.js","repositoryapp.js","repositorymain.js","staffapp.js","staffmain.js","components/fileeditor.js","components/messages.js","components/projectapi.js","components/userinfo.js","components/webdavfilepanel.js","login/login.js","pickerclient/pickerclient.js","resources/index.js","scientist/dashboard.js","scientist/repositorytovf.js","staff/repositorystaff.js"],"names":["App","configureRouter","config","router","title","login","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","developmentLogging","feature","start","then","setRoot","Repositoryapp","map","route","name","moduleId","nav","activate","params","routeConfig","console","log","Staffapp","CodeMirror","Fileeditor","el","ea","httpclient","client","subscribe","selectFile","msg","file","isimage","filename","attached","editor","querySelector","codemirror","fromTextArea","cmTextarea","lineNumbers","mode","lineWrapping","refresh","that","imageurl","webdavurl","endsWith","fetch","credentials","response","text","setValue","data","catch","alert","error","inject","Element","Webdavresource","Editfile","Uploaddir","ProjectApi","rejectErrorResponses","withBaseUrl","withDefaults","headers","apiurl","window","location","pathname","indexOf","projecturl","dataurl","userinfourl","usersurl","getProjects","json","getDatasets","getUsers","getUserInfo","Userinfo","projectapi","pa","showuserinfo","userinfo","Webdavfilepanel","setwebdav","webdavpath","dirs","method","DOMParser","parseFromString","str","files","filesDOM","getElementsByTagName","fileitem","getFirstElementByTagName","filedate","filesize","filetype","item","replace","date","isdir","size","type","unshift","push","length","tag","elements","textContent","newdir","pop","publish","Login","Pickerclient","href","href2","vfurl","th2","receiveMessage","e","addEventListener","filepicker","detached","removeEventListener","openfilewindow","popup","open","opendirwindow","globalResources","Dashboard","projects","datasets","alldatasets","showProposals","showDatasets","dataseturl","selectedProjectId","selectedDatasetId","selectedProject","navigationInstruction","projectid","filterSelectedProposal","datasetid","filterSelectedDataset","filterProject","filterMyDataset","filterDataset","selectProposal","id","filter","i","projectId","selectDataset","filtereditem","deselectProposal","selectedDataset","deselectDataset","Repositorytovf","filestoupload","uploadfiles","uploaddir","selectingfiles","setuploaddir","copyinprogress","url","selectedUploadDir","selectitem","submitfiles","unsubmitfiles","deleteitem","indexremoved","splice","selectItemToUpload","removeItemToUpload","dropped","event","dataTransfer","stopPropagation","preventDefault","dragged","appendFiles","target","appendDir","submitUpload","copy","Repositorystaff","visitors","selectinguser","selectedvisitor","selectvisitor","visitor","deselectvisitor"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n\n  configureRouter(config, router) {\n    config.title = 'West-Life Repository Router';\n  }\n\n  login() {\n    //window.location=\"login.html?next\"+window.location.pathname;\n  }\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","//Configure Bluebird Promises not to throw warnings about aurelia empty promises\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .developmentLogging().feature('resources');\n  aurelia.start().then(() => aurelia.setRoot());\n\n  }\n","export class Repositoryapp {\n\n  configureRouter(config, router) {\n    config.title = 'West-Life Repository Router';\n\n    config.map([\n      {route: ['', 'dashboard'], name: 'dashboard', moduleId: 'scientist/dashboard', nav: true, title: 'Dataset Dashboard'},\n      {route: 'dashboard/project/:projectid/', name: 'projectdetail', moduleId: 'scientist/dashboard'},\n      {route: 'dashboard/dataset/:datasetid/', name: 'datasetdetail', moduleId: 'scientist/dashboard'},\n      {route: 'repositorytovf', name: 'repositorytovf', moduleId: 'scientist/repositorytovf', nav: true, title: 'Upload to Virtual Folder'},\n    ]);\n    this.router = router;\n  }\n\n  login() {\n    //window.location=\"login.html?next\"+window.location.pathname;\n  }\n\n  activate(params, routeConfig){\n    console.log(\"repository/app.activate()\")\n    console.log(params);\n  }\n}\n","//Configure Bluebird Promises not to throw warnings about aurelia empty promises\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .developmentLogging().feature('resources');\n  aurelia.start().then(() => aurelia.setRoot('repositoryapp'));\n}\n","export class Staffapp {\n\n  configureRouter(config, router) {\n    config.title = 'West-Life Repository Router';\n    config.map([\n      {route: ['', 'home'], name: 'home', moduleId: 'staff/repositorystaff', nav: true, title: 'Dataset Dashboard'}\n    ]);\n    this.router = router;\n\n  }\n\n}\n","export function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .developmentLogging().feature('resources');\n  aurelia.start().then(() => aurelia.setRoot('staffapp'));\n}\n","/**\n * Created by Tomas Kulhanek on 2/17/17.\n */\n\nimport * as CodeMirror from \"codemirror\";\nimport \"codemirror/mode/clike/clike\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/javascript/javascript\";\n\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport {Editfile} from './messages';\nimport {bindable} from 'aurelia-framework';\n\n\n//import $ from 'jquery';\n\n\nexport class Fileeditor {\n  static inject = [Element,EventAggregator, HttpClient];\n  @bindable pid;\n\n  constructor(el,ea,httpclient) {\n    this.el = el;\n    this.ea = ea;\n    this.client = httpclient;\n    this.ea.subscribe(Editfile, msg => this.selectFile(msg.file));\n    this.isimage=false;\n    this.filename=\"\";\n  }\n\n  attached() {\n    let editor = this.el.querySelector(\".Codemirror\");\n    //prevent blured render if not shown before\n    //if (editor==null)\n    this.codemirror = CodeMirror.fromTextArea(this.cmTextarea, {\n      lineNumbers: true,\n      mode: \"text/x-less\",\n      lineWrapping: true\n    });\n    this.codemirror.refresh();\n  }\n\n  selectFile(file) {\n    let that =this\n\n      this.imageurl = file.webdavurl;\n      //visualizeimg is set & image extension is detected\n      //console.log(\"fileeditor.selectfile() visualizeimg: isimage:\")\n      //console.log(localStorage.getItem(\"visualizeimg\"));\n      //vfstorage returns string - should convert to boolean\n      this.isimage =\n        ((file.name.endsWith('.JPG'))||\n          (file.name.endsWith('.jpg'))||\n          (file.name.endsWith('.PNG'))||\n          (file.name.endsWith('.png'))||\n          (file.name.endsWith('.GIF'))||\n          (file.name.endsWith('.gif'))||\n          (file.name.endsWith('.BMP'))||\n          (file.name.endsWith('.bmp'))||\n          (file.name.endsWith('.SVG'))||\n          (file.name.endsWith('.svg')));\n\n      //console.log(\"fileeditor.selectfile() visualizeimg: isimage:\")\n      //console.log(this.isimage);\n      if (!this.isimage)\n        this.client.fetch(file.webdavurl, {credentials: 'same-origin'})\n          .then(response => response.text())\n          .then(data =>{\n\n              //console.log(\"fileeditor.selectfile() loading:\" + file.webdavurl);\n              //console.log(data);\n              that.codemirror.setValue(data);\n              that.codemirror.refresh();\n              that.filename=file.webdavurl;\n            }\n          ).catch(error => {\n          alert('Error retrieving content from ' + file.webdavurl);\n          console.log(error);\n        });\n\n\n  }\n}\n","/**\n * Created by Tomas Kulhanek on 1/9/17.\n */\n\nexport class Webdavresource {\n  constructor(webdavurl){\n    this.webdavurl = webdavurl;\n  }\n}\n\nexport class Editfile {\n  constructor(file){\n    this.file = file;\n  }\n}\n\nexport class Uploaddir {\n  constructor(webdavurl){\n    this.webdavurl = webdavurl;\n  }\n}\n","import {HttpClient} from 'aurelia-fetch-client';\n\n/* Provides methods to return promise of data from REST Project api*/\nexport class ProjectApi {\n  static inject = [HttpClient];\n\n  constructor(httpclient) {\n    this.httpclient=httpclient;\n    this.httpclient.configure(config => {\n      config\n        .rejectErrorResponses()\n        .withBaseUrl('')\n        .withDefaults({\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n    });\n    //needs SSO credentials\n    let apiurl = \"/restcon\";\n    //test fronted calls test backend uri - which has test authentication - test credentials added\n    if (window.location.pathname.indexOf('repositorytest2')>0) apiurl = \"/restcontest2\";\n    else if (window.location.pathname.indexOf('repositorytest')>0) apiurl = \"/restcontest\";\n    this.projecturl=apiurl+\"/project\";\n    this.dataurl=apiurl+\"/dataset\";\n    this.userinfourl=apiurl+\"/user\";\n    //needs admin/staff credentials\n    this.usersurl=\"/admin/restcon/users\";\n  }\n\n  getProjects() {\n    return this.httpclient.fetch(this.projecturl)\n      .then(response => response.json())\n      .then(data => {\n        return data\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n      /*\n        this.proposalsall = data;\n        this.proposals = this.prop/osalsall.slice(0,3);\n        this.proposalslength= this.proposalsall.length;\n        this.showallbutton = this.proposalsall.length > 3;\n        this.showmorebutton = true;\n\n      })*/\n    //not yet implemented on backend\n  getDatasets() {\n    return this.httpclient.fetch(this.dataurl)\n      .then(response => response.json())\n      .then(data => {\n        //console.log(data);\n        return data;\n      })\n      .catch(error => {\n        //console.log(error);\n        console.log(error);\n      });\n\n  }\n\n  /* getting list of users - available for staff */\n  getUsers() {\n    return this.httpclient.fetch(this.usersurl)\n      .then(response => response.json())\n      .then(data => {\n        console.log(data);\n        return data;\n      })\n      .catch(error => {\n        //console.log(error);\n        console.log(error);\n        //alert(\"Sorry, error:\"+error.statusCode+\" \"+error.message);\n      });\n  }\n\n  getUserInfo() {\n      console.log(\"getUserInfo()\");\n      console.log(this.httpclient);\n      console.log(this.userinfourl);\n      return this.httpclient.fetch(this.userinfourl)\n        .then(response => response.json())\n        .then(data => {\n          console.log(data);\n          return data;\n        })\n        .catch(error => {\n          //console.log(error);\n          console.log(error);\n//          alert(\"Sorry, error:\"+error.statusCode+\" \"+error.message);\n        });\n    }\n}\n","import {ProjectApi} from './projectapi';\n\nexport class Userinfo {\n  static inject = [ProjectApi];\n\n  constructor(projectapi) {\n    this.pa = projectapi;\n    this.showuserinfo=false;\n  }\n\n  attached(){\n    //console.log(\"Userinfo atached()\")\n    //console.log(this.pa);\n    this.pa.getUserInfo().then(data => {\n        //console.log(data);\n        this.userinfo=data;\n        this.showuserinfo=true;\n      })\n  }\n}\n","import {HttpClient} from 'aurelia-fetch-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {Editfile,Webdavresource} from './messages';\n\nexport class Webdavfilepanel {\n  static inject = [EventAggregator,HttpClient];\n\n  constructor(ea,httpclient) {\n    this.ea =ea;\n    this.httpclient = httpclient;\n    this.httpclient.configure(config => {\n      config\n        .rejectErrorResponses()\n        .withBaseUrl('')\n        .withDefaults({\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n    });\n    //this.webdavbase = ;\n    this.ea.subscribe(Webdavresource,msg =>this.setwebdav(msg.webdavurl))\n    this.webdavpath = '/files/XufWqKau/';\n    this.dirs=[];\n  }\n\n  setwebdav(webdavurl) {\n    this.webdavpath = webdavurl;\n    this.httpclient.fetch(this.webdavpath, {\n      method: 'PROPFIND',\n      headers: {'Depth': '1'}\n    }).then(response => response.text())\n      .then(str => (new window.DOMParser()).parseFromString(str, \"text/xml\"))\n      .then(data => {\n        console.log(\"selectDataset() files:\")\n        console.log(data);\n        //parse structure https://stackoverflow.com/questions/17604071/parse-xml-using-javascript\n        this.files = [];\n        let filesDOM = data.getElementsByTagName(\"D:response\");\n        for (let fileitem of filesDOM) {\n          let filename = this.getFirstElementByTagName(fileitem, \"D:href\");\n          let filedate = this.getFirstElementByTagName(fileitem, \"lp1:creationdate\");\n          let filesize = this.getFirstElementByTagName(fileitem, \"lp1:getcontentlength\");\n          let filetype = this.getFirstElementByTagName(fileitem, \"D:getcontenttype\");\n          if (filename != this.webdavpath) //do not include current dir\n          {\n            let item = {};\n            item.name = filename.replace(this.webdavpath, '')\n            item.date = filedate;\n            item.isdir= filetype == 'httpd/unix-directory';\n            item.size = filetype == 'httpd/unix-directory' ? 'DIR' : filesize;\n            item.type = filetype;\n            item.webdavurl=this.webdavpath+item.name;\n            console.log(item);\n            //directory first, files after that\n            if (item.isdir) this.files.unshift(item);\n            else this.files.push(item);\n          }\n\n        }\n        //adds first row with '..' to cd to parent directory\n        if (this.dirs.length>0) this.files.unshift({name:'..',isdir:true,size:'DIR',date:''});\n        console.log(this.files);\n\n      }).catch(error => {\n      console.log(\"selectDataset() error\");\n      console.log(error);\n    });\n  }\n\n  getFirstElementByTagName(fileitem,tag) {\n    //console.log(tag);\n    let elements =fileitem.getElementsByTagName(tag);\n    //console.log(elements);\n    return elements.length>0?elements[0].textContent:'';\n  }\n\n  selectFile(file){\n    //file.webdavurl = this.webdavpath+file.name;\n    if (file.isdir) {\n      let newdir= '';\n      if (file.name =='..') {\n        newdir = this.dirs.pop();\n      } else {\n        this.dirs.push(this.webdavpath);\n        newdir = this.webdavpath+file.name;\n      }\n      this.setwebdav(newdir);\n    }\n    else  this.ea.publish(new Editfile(file));\n  }\n\n}\n","import {HttpClient} from 'aurelia-http-client';\n\nexport class Login {\n\n\n}\n","import {bindable} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {Uploaddir} from '../components/messages';\n\nexport class Pickerclient {\n  static inject = [EventAggregator];\n  @bindable mode;\n\n  constructor(ea) {\n    this.ea=ea;\n    this.href=\"https://portal.west-life.eu/virtualfolder/filepickercomponent.html\";\n    this.href2=\"https://portal.west-life.eu/virtualfolder/uploaddirpickercomponent.html\";\n    this.vfurl=\"\";\n    //receives message from popup window, fills target element with the data received\n    let th2= this\n    this.receiveMessage = e => {\n      console.log(\"received event\");\n      console.log(e);\n      th2.vfurl=e.data;\n      console.log(\"publishing event\");\n      th2.ea.publish(new Uploaddir(th2.vfurl))\n    }\n    console.log(\"Pickerclient()\");\n    console.log(this.mode)\n  }\n\n  attached() {\n    //registers itself to receive message from popup window\n    window.addEventListener(\"message\", this.receiveMessage);\n    console.log(\"Pickerclient attached()\");\n    console.log(this.mode);\n    this.filepicker = (this.mode === \"file\")\n  }\n\n  detached() {\n    window.removeEventListener(\"message\", this.receiveMessage)\n  }\n\n//opens popup window in defined location, sets the target element id.\n  openfilewindow() {\n    this.popup=window.open(this.href, 'newwindow', 'width=640, height=480');\n  }\n  opendirwindow() {\n    this.popup=window.open(this.href2, 'newwindow', 'width=640, height=480');\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n  config.globalResources(['./irep.html', './irepdemo.html', './iadmin.html', './istaff.html','./ifile.html','./ilink.html','./ifolder.html']);\n\n}\n","import {Webdavresource} from \"../components/messages\";\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {ProjectApi} from '../components/projectapi';\n\n/* Dashboard receives list of projects and list of datasets, in case the project or dataset is selected either by click or within url it is filtered */\nexport class Dashboard {\n  static inject = [EventAggregator,ProjectApi];\n\n  constructor(ea,pa) {\n    this.ea = ea;\n    this.pa=pa;\n\n    this.projects = [];\n\n    this.files=[];\n    this.datasets = [];\n    this.alldatasets = [];\n    this.showProposals=true;\n    this.showDatasets=true;\n    this.dataseturl=\"\";\n    this.selectedProjectId=0;\n    this.selectedDatasetId=0;\n    this.selectedProject={};\n  }\n\n  /* it is triggered in first click on project - url is generated\n  * or when url is submitted directly to browser */\n  activate(params, routeConfig, navigationInstruction){\n    //console.log(\"Visitingscientist activate()\")\n    if (params && params.projectid) {\n      console.log(\"Activate() with selectedProject\");\n      console.log(params.projectid);\n      this.filterSelectedProposal(params.projectid);\n    }\n    if (params && params.datasetid) {\n      console.log(\"Activate() with selectedDataset\");\n      console.log(params.datasetid);\n      this.filterSelectedDataset(params.datasetid);\n    }\n  }\n\n  /* triggered when the view is shown to user - it requests projects and dataset\n  * available for user from REST api*/\n  attached() {\n    //console.log(\"Dashboard.attached(): pa:\")\n    //console.log(this.pa);\n    this.pa.getProjects().then(data => {\n          console.log(\"attached(), getProjects():\");\n          this.projects = data;//this.proposalsall.slice(0,3);\n          if (this.selectedProjectId>0) {this.filterProject()}\n      });\n    this.pa.getDatasets().then(data => {\n          this.alldatasets = data;       \n          if (this.selectedDatasetId>0) {this.filterMyDataset()} //triggered when accessed by url dashboard/dataset/1\n          else \n          if (this.selectedProjectId>0) {this.filterDataset()}  //triggered when accessed by url dashboard/project/1\n          //  this.datasets = this.alldatasets.filter(filtereditem => filtereditem.projectId == this.selectedProjectId);\n    });\n  }\n\n  //triggered when a project is clicked -\n  // if the same project is selected activate() is not launched - enough to hide all other projects\n  selectProposal(id) {\n    this.showProposals=false;\n    this.showDatasets=true;\n    return true;\n  }\n\n  /* this is used when new project proposal is selected - it filters project by id and datasets by id*/\n  filterSelectedProposal(id) {\n    //this.selectedProposal=item;\n    console.log(\"filterSelectProposal()\");\n    console.log(id);\n    this.selectedProjectId=id;\n    this.filterProject();\n    this.filterDataset();\n  }\n\n  filterSelectedDataset(id) {\n    //this.selectedProposal=item;\n    console.log(\"filterSelectDataset()\");\n    console.log(id);\n    this.selectedDatasetId=id;\n    //this.filterMyProject();\n    this.filterMyDataset();\n  }\n  \n  //expects that selectedDatasetId contains dataset which should be viewed, based on it it selects projectid\n  //filters project which is owning the dataset and publish webdavresource event with dataset webdavurl\n  filterMyDataset(){\n    this.datasets= this.alldatasets.filter(i=> i.id === this.selectedDatasetId);\n    if (this.datasets.length>0){\n      this.selectedProjectId=this.datasets[0].projectId;\n      this.filterProject();\n      this.showProposals=false;\n      this.selectDataset(this.datasets[0]);\n    }\n  }\n\n  /* helper class called from filterSelecterProposal - or when attached() so activate() call before didn't have\n  * the projects and datasets sets from REST api*/\n  filterProject(){\n    this.selectedProject=this.projects.filter(i=>i.id==this.selectedProjectId)[0];\n    this.showProposals = false;\n    //console.log(this.selectedProject);\n  }\n\n  //filters dataset based on selectedProjectId\n  filterDataset(){\n    this.datasets = this.alldatasets.filter(filtereditem => filtereditem.projectId === this.selectedProjectId);\n    //console.log(this.datasets);\n  }\n\n  //deselect project proposal, shows all proposals and datasets\n  deselectProposal() {\n    //this.selectedProposal=item;\n    this.datasets = this.alldatasets;\n    this.showProposals = true;\n    return true; //continues to process <a href>\n  }\n\n  //shows only one dataset and publish webdavresource with dataset's url\n  selectDataset(item) {\n    this.showDatasets=false;\n    this.selectedDataset=item;\n    //TODO replace URL by the one obtained from API\n    this.dataseturl=item.webdavurl;\n    this.ea.publish(new Webdavresource(item.webdavurl))\n    return true; //continues to process <a href>\n  }\n\n  deselectDataset() {\n    this.showDatasets=true;\n  }\n\n  selectFile(file){\n    console.log(\"SelectFile()\");\n    console.log(file);\n    //not yet implemented\n  }\n}\n","\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {Uploaddir} from '../components/messages';\n\nexport class Repositorytovf {\n  static inject = [EventAggregator]\n  constructor(ea) {\n    this.ea = ea;\n    console.log(\"Repositorytovf()\");\n\n\n    this.datasets=[{name:\"sucrose.t1\",size:133511,date:\"18/06/2001\"},\n      {name:\"hetcor.2d\",size:525832,date:\"18/06/2001\"},\n      {name:\"menth.c13\",size:132108,date:\"18/06/2001\"},\n      {name:\"noesy.fid\",size:1640436,date:\"18/06/2001\"},\n      {name:\"hsqc.fid\",size:2098448,date:\"18/06/2001\"},\n      {name:\"hmbc.fid\",size:2098448,date:\"18/06/2001\"}];\n    this.filestoupload=[];\n    this.uploadfiles=[];\n    this.uploaddir=\"\";\n    this.selectingfiles=true;\n    this.ea.subscribe(Uploaddir,msg =>this.setuploaddir(msg.webdavurl))\n    this.copyinprogress=false;\n  }\n\n  attached() {\n\n  }\n\n  setuploaddir(url) {\n    console.log(\"setuploaddir()\");\n    console.log(url)\n    this.uploaddir=url;\n    this.selectedUploadDir = true;\n  }\n\n  selectitem(item) {\n    console.log(\"Selected\",item)\n  }\n\n  submitfiles() {\n    this.selectingfiles=false;\n  }\n\n  unsubmitfiles(){\n    this.selectingfiles=true;\n  }\n  deleteitem(item){\n    let indexremoved = this.datasets.indexOf(item);\n    if (indexremoved >=0 ) this.datasets.splice(indexremoved,1);\n  }\n\n  selectItemToUpload(item) {\n    console.log(\"selected item\");\n    console.log(item);\n  }\n\n  removeItemToUpload(item){\n    console.log(\"selected item\");\n    console.log(item);\n    let i = this.filestoupload.indexOf(item);\n    this.filestoupload.splice(i,1);\n  }\n\n  dropped(event){\n    console.log(\"Dropped\")\n    console.log(event.dataTransfer.files);\n    event.stopPropagation();\n    event.preventDefault();\n    this.filestoupload.unshift(...event.dataTransfer.files);\n    return true;\n  }\n\n  dragged(event){\n    return true;//event.preventDefault(); event.dataTransfer.dropEffect = 'copy';\n  }\n\n  appendFiles(event){\n    console.log(\"appendFiles()\");\n    console.log(event.target.files);\n    //this.uploadfiles=event.target.files;\n    this.filestoupload.unshift(...event.target.files);\n    //else this.filestoupload.unshift(event.target.files);\n  }\n\n  appendDir(event) {\n    console.log(\"appendDir\")\n    console.log(event.target.files);\n    this.filestoupload.unshift(...event.target.files)\n  }\n\n  submitUpload(){\n    //TODO fake implementation\n    this.datasets.unshift(...this.filestoupload);\n    this.filestoupload=[];\n  }\n  copy(){\n    this.copyinprogress=true;\n  }\n\n}\n","import {ProjectApi} from '../components/projectapi';\n\nexport class Repositorystaff {\n  static inject = [ProjectApi];\n  constructor(pa) {\n    console.log(\"Repositorystaff()\");\n    this.visitors = [];//\"Tomas Kulhanek\",\"Andrea Giacchieti\",\"Antonio Rosatto\"];\n    this.datasets=[];\n    this.filestoupload=[];\n    this.uploadfiles=[];\n    this.uploaddir=\"\";\n    this.selectinguser=true;\n    this.selectedvisitor=\"\";\n    this.pa = pa;\n  }\n\n  attached() {\n    this.pa.getUsers()\n      .then(data => { this.visitors = data });\n  }\n\n  selectitem(item) {\n    console.log(\"Selected\",item)\n  }\n\n  selectvisitor(visitor) {\n    this.selectinguser=false;\n    this.selectedvisitor = visitor;\n  }\n  deselectvisitor(){\n    this.selectinguser=true;\n  }\n  deleteitem(item){\n    let indexremoved = this.datasets.indexOf(item);\n    if (indexremoved >=0 ) this.datasets.splice(indexremoved,1);\n  }\n  \n    selectItemToUpload(item) {\n    console.log(\"selected item\");\n    console.log(item);\n  }\n\n  removeItemToUpload(item){\n    console.log(\"selected item\");\n    console.log(item);\n  let i = this.filestoupload.indexOf(item);\n    this.filestoupload.splice(i,1);\n  }\n\n  dropped(event){\n    console.log(\"Dropped\");\n    console.log(event.dataTransfer.files);\n    event.stopPropagation();\n    event.preventDefault();\n    this.filestoupload.unshift(...event.dataTransfer.files);\n    return true;\n  }\n\n  dragged(event){\n    return true;//event.preventDefault(); event.dataTransfer.dropEffect = 'copy';\n  }\n\n  appendFiles(event){\n    console.log(\"appendFiles()\");\n    console.log(event.target.files);\n    //this.uploadfiles=event.target.files;\n    this.filestoupload.unshift(...event.target.files);\n    //else this.filestoupload.unshift(event.target.files);\n  }\n\n  appendDir(event) {\n    console.log(\"appendDir\");\n    console.log(event.target.files);\n    this.filestoupload.unshift(...event.target.files)\n  }\n\n  submitUpload(){\n    //TODO fake implementation\n    this.datasets.unshift(...this.filestoupload);\n    this.filestoupload=[];\n  }\n\n}\n"],"sourceRoot":"../src"}