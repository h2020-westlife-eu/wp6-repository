<VirtualHost *>
# WebDAV request are redirected to filesystem directory
    Alias "/webdav" "/home/vagrant/work/"
    <Directory "/home/vagrant/work">
    	Options Indexes FollowSymLinks
	    DAV On
	    DavDepthInfinity on
	    Require all granted
    </Directory>

	# Web UI of VF - are pure HTML, JS, CSS
	# XBitHack to enable HTML imports on files with x bit set, <!-- import -->
	Alias "/repository" "/cvmfs/west-life.egi.eu/software/repository/latest/www/"
	<Directory "/cvmfs/west-life.egi.eu/software/repository/latest/www">
	    Require all granted
		Options FollowSymLinks IncludesNOEXEC
		AllowOverride All
		XBitHack On
	</Directory>

    # allowing to execute scripts directly
	ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
	<Directory "/usr/lib/cgi-bin">
		AllowOverride None
		Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    	Require all granted
	</Directory>

	# Possible values include: debug, info, notice, warn, error, crit,
	# alert, emerg.
	# LogLevel debug rewrite:trace3

	#CustomLog ${APACHE_LOG_DIR}/access.log combined
	ErrorDocument 502 /repository/error502.html
	ErrorDocument 503 /repository/error503.html

    # SSL proxy for webdav content directly from localhost/webdav/b2drop to b2drop site
    # This has much better performance than reading the content of the mounted davfs dir
    SSLProxyEngine On
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
    SSLProxyCheckPeerExpire off

    # proxy to metadataservice to port 8001
    # ProxyPass /metadataservice http://127.0.0.1:8001/metadataservice
    # ProxyPassReverse /metadataservice http://127.0.0.1:8001/metadataservice

</VirtualHost>
